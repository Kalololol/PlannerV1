@page "/"
@inject MediatR.IMediator _mediator
@using Planner.Application.ViewModels
@using Planner.Application.Service.Queries


<PageTitle>SPG - System planowania grafiku</PageTitle>

<h1>System planowania grafiku</h1>


<p>
    <table class="table">
        <tr>
            <th><a class="nav-link">Imię i Nazwisko</a></th>
            <th><a class="nav-link">Prawo wyk. zawodu</a></th>
            <th><a class="nav-link">Telefon</a></th>
        </tr>
    @foreach(var e in employees)
    {
        <tr>
            <td><a href="@($"/employeedetails/{e.Id}")">@e.Name @e.Surname</a></td>
            <td>@e.LicenseNumber</td>
            <td>@e.PhoneNumber</td>

            
        </tr>
   

    }
    </table>
</p>



<div>
    <a href="@($"/employeeall")">Pracownicy</a>
</div>





@code {
    List<EmployeeViewModel> employees;
     

    protected override async Task OnInitializedAsync()
    {
        employees = await _mediator.Send(new GetEmployeesQuery());
        
        
    }

}


