@page "/employeedetails/{id:int}"

@inject MediatR.IMediator _mediator
@using Planner.Application.ViewModels
@using Planner.Application.Service.Queries


<PageTitle>SPG - szczegóły pracownika</PageTitle>

<h3>Pracownik @employee.Name @employee.Surname</h3>

 <table class="table">
        <tr>
            <th><a class="nav-link">Imię i Nazwisko</a></th>
            <th><a class="nav-link">Prawo wyk. zawodu</a></th>
            <th><a class="nav-link">Telefon</a></th>
            <th><a class="nav-link">Hasło</a></th>

        </tr>
        <tr>
            <td>@employee.Name @employee.Surname</td>
            <td>@employee.LicenseNumber</td>
            <td>@employee.PhoneNumber</td>
            <td>@employee.Password</td>

            
        </tr>
        <br />
        <div>
    <a href="@($"/employeeall")">Cofnij</a>
        </div>

        </table>
   

    


@code {
    [Parameter]
    public int Id { get; set; }

    private EmployeeViewModel employee;
        List<EmployeeViewModel> employees;


    protected override async Task OnInitializedAsync()
    {
        base.OnInitialized();
        
        employees = await _mediator.Send(new GetEmployeesQuery());


        employee = employees.FirstOrDefault(x => x.Id == this.Id);
        
        
    }

}
